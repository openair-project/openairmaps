<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Spatially interpolated dynamic and static maps — krigingMap • openairmaps</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Nunito_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Spatially interpolated dynamic and static maps — krigingMap"><meta name="description" content="These functions create interpolated surfaces out of data at individual
monitoring sites. This can be useful to 'fill in the gaps' to estimate
pollution concentrations where no monitoring is occurring, or better identify
geographical patterns in pollution data. krigingMap() creates a smooth
spatially interpolated surface using either inverse distance weighting or
point kriging. voronoiMap() creates a surface of 'closest observation'
polygons. The kriging formula is currently always pollutant ~ 1;
krigingMap() does not currently support more complex models."><meta property="og:description" content="These functions create interpolated surfaces out of data at individual
monitoring sites. This can be useful to 'fill in the gaps' to estimate
pollution concentrations where no monitoring is occurring, or better identify
geographical patterns in pollution data. krigingMap() creates a smooth
spatially interpolated surface using either inverse distance weighting or
point kriging. voronoiMap() creates a surface of 'closest observation'
polygons. The kriging formula is currently always pollutant ~ 1;
krigingMap() does not currently support more complex models."><meta property="og:image" content="https://openair-project.github.io/openairmaps/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">openairmaps</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.1.9011</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/openairmaps.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openair-project" aria-label="Website"><span class="fa fa-globe"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://openair-project.github.io/book/" aria-label="Book"><span class="fa fa-book"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openair-project/openairmaps/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Packages</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-packages"><li><h6 class="dropdown-header" data-toc-skip>Data Analysis</h6></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/openair/">🧭 openair</a></li>
    <li><a class="dropdown-item" href="https://openair-project.github.io/openairmaps/">🗺️ openairmaps</a></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/deweather/">📉 deweather</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Data Access</h6></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/worldmet/">🍃 worldmet</a></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/euroaq/">🌍 euroaq</a></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/ukaq/">👑 ukaq</a></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Spatially interpolated dynamic and static maps</h1>
      <small class="dont-index">Source: <a href="https://github.com/openair-project/openairmaps/blob/main/R/interpMap.R" class="external-link"><code>R/interpMap.R</code></a></small>
      <div class="d-none name"><code>interpolate-map.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions create interpolated surfaces out of data at individual
monitoring sites. This can be useful to 'fill in the gaps' to estimate
pollution concentrations where no monitoring is occurring, or better identify
geographical patterns in pollution data. <code>krigingMap()</code> creates a smooth
spatially interpolated surface using either inverse distance weighting or
point kriging. <code>voronoiMap()</code> creates a surface of 'closest observation'
polygons. The kriging formula is currently always <code>pollutant ~ 1</code>;
<code>krigingMap()</code> does not currently support more complex models.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">krigingMap</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  pollutant <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  statistic <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  percentile <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"idw"</span>, <span class="st">"kriging"</span><span class="op">)</span>,</span>
<span>  breaks <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  limits <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  latitude <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  longitude <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"OpenStreetMap"</span>,</span>
<span>  cols <span class="op">=</span> <span class="st">"turbo"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  show.markers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  marker.border <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  legend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  legend.position <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  legend.title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  legend.title.autotext <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  static <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  vgm <span class="op">=</span> <span class="fu">gstat</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/gstat/reference/vgm.html" class="external-link">vgm</a></span><span class="op">(</span>psill <span class="op">=</span> <span class="fl">1</span>, model <span class="op">=</span> <span class="st">"Exp"</span>, range <span class="op">=</span> <span class="fl">50000</span>, nugget <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  args.idw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  args.variogram <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  args.fit.variogram <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  args.krige <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">voronoiMap</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  pollutant <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  statistic <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  percentile <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  breaks <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  limits <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  latitude <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  longitude <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"OpenStreetMap"</span>,</span>
<span>  cols <span class="op">=</span> <span class="st">"turbo"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  show.markers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  marker.border <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  voronoi.border <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  legend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  legend.position <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  legend.title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  legend.title.autotext <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  static <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  args.voronoi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p><em>Input data table with pollutant and geo-spatial information.</em></p>
<p><strong>required</strong> | <em>scope:</em> dynamic &amp; static</p>
<p>A data frame. The data frame must contain at least one numeric column to
interpolate, plus a decimal latitude and longitude (or X/Y coordinate used
in conjunction with <code>crs</code>).</p></dd>


<dt id="arg-pollutant">pollutant<a class="anchor" aria-label="anchor" href="#arg-pollutant"></a></dt>
<dd><p><em>Pollutant name.</em></p>
<p><strong>required</strong> | <em>scope:</em> dynamic &amp; static</p>
<p>The column name of the pollutant to plot. Multiple <code>pollutants</code> are
prohibited by this function.</p></dd>


<dt id="arg-statistic">statistic<a class="anchor" aria-label="anchor" href="#arg-statistic"></a></dt>
<dd><p><em>Statistic for aggregating pollutant data.</em></p>
<p><em>default:</em> <code>"mean"</code> | <em>scope:</em> dynamic &amp; static</p>
<p>Pollutant data will be aggregated by latitude &amp; longitude; <code>statistic</code>
controls how this is achieved. Possible statistics include:</p><ul><li><p><code>"mean"</code>: the arithmetic mean (using <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code>)</p></li>
<li><p><code>"median"</code>: the median (middle) value (using <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">stats::median()</a></code>)</p></li>
<li><p><code>"max"</code>: the maximum value (using <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max()</a></code>)</p></li>
<li><p><code>"min"</code>: the maximum value (using <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min()</a></code>)</p></li>
<li><p><code>"sd"</code>: the standard deviation (using <code><a href="https://rdrr.io/r/stats/sd.html" class="external-link">stats::sd()</a></code>)</p></li>
<li><p><code>"percentile"</code>: a percentile value, defined using the <code>percentile</code> argument (using <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">stats::quantile()</a></code>)</p></li>
</ul></dd>


<dt id="arg-percentile">percentile<a class="anchor" aria-label="anchor" href="#arg-percentile"></a></dt>
<dd><p><em>The percentile when `statistic = "percentile"</em></p>
<p><em>default:</em> <code>95</code> | <em>scope:</em> dynamic &amp; static</p>
<p>The percentile level used when <code>statistic = "percentile"</code>. The default is
<code>95</code>, representing 95%. Should be between <code>0</code> and <code>100</code>.</p></dd>


<dt id="arg-newdata">newdata<a class="anchor" aria-label="anchor" href="#arg-newdata"></a></dt>
<dd><p><em>A spatial dataset of prediction locations.</em></p>
<p><em>default:</em> <code>NULL</code> | <em>scope:</em> dynamic &amp; static</p>
<p>By default, a bounding box of all latitudes and longitudes are used for
prediction, but this is often not useful or aesthetically pleasing.
<code>newdata</code> should be a spatial data frame (constructed with
<code><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">sf::st_as_sf()</a></code>). This may be a country or authority boundary relevant to
the <code>data</code> input.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p><em>Spatial interpolation method.</em></p>
<p><em>default:</em> <code>"idw"</code> | <em>scope:</em> dynamic &amp; static</p>
<p>The spatial interpolation method to use for <code>krigingMap()</code>. <code>"idw"</code> uses
inverse distance weighting (IDW) which is simpler and faster. <code>"kriging"</code>
uses full point kriging which is typically more accurate, but is also more
complex and computationally intensive.</p></dd>


<dt id="arg-labels-breaks">labels, breaks<a class="anchor" aria-label="anchor" href="#arg-labels-breaks"></a></dt>
<dd><p><em>Discretise the map color scale.</em></p>
<p><em>default:</em> <code>NULL</code> | <em>scope:</em> dynamic &amp; static</p>
<p>By default, a continuous colour scale is used. If <code>breaks</code> are provided,
the colour scale will be discretised using <code><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut()</a></code>. <code>labels</code> can also be
provided to customise how each factor level is labelled.</p></dd>


<dt id="arg-limits">limits<a class="anchor" aria-label="anchor" href="#arg-limits"></a></dt>
<dd><p><em>Specifier for the plot colour scale bounds.</em></p>
<p><em>default:</em> <code>NULL</code> | <em>scope:</em> dynamic &amp; static</p>
<p>A numeric vector in the form <code>c(lower, upper)</code> used to define the colour
scale. For example, <code>limits = c(0, 100)</code> would force the plot limits to
span 0-100. If <code>NULL</code>, appropriate limits will be selected based on the
range in <code>data[[pollutant]]</code>.</p></dd>


<dt id="arg-latitude-longitude">latitude, longitude<a class="anchor" aria-label="anchor" href="#arg-latitude-longitude"></a></dt>
<dd><p><em>The decimal latitude(Y)/longitude(X).</em></p>
<p><em>default:</em> <code>NULL</code> | <em>scope:</em> dynamic &amp; static</p>
<p>Column names representing the decimal latitude and longitude (or other Y/X
coordinate if using a different <code>crs</code>). If not provided, will be
automatically inferred from data by looking for a column named
"lat"/"latitude" or "lon"/"lng"/"long"/"longitude" (case-insensitively).</p></dd>


<dt id="arg-crs">crs<a class="anchor" aria-label="anchor" href="#arg-crs"></a></dt>
<dd><p><em>The coordinate reference system (CRS).</em></p>
<p><em>default:</em> <code>4326</code> | <em>scope:</em> dynamic &amp; static</p>
<p>The coordinate reference system (CRS) of the data, passed to
<code><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">sf::st_crs()</a></code>. By default this is <a href="https://epsg.io/4326" class="external-link">EPSG:4326</a>, the
CRS associated with the commonly used latitude and longitude coordinates.
Different coordinate systems can be specified using <code>crs</code> (e.g., <code>crs = 27700</code> for the <a href="https://epsg.io/27700" class="external-link">British National Grid</a>). Note that
non-lat/lng coordinate systems will be re-projected to EPSG:4326 for
plotting on the map.</p></dd>


<dt id="arg-provider">provider<a class="anchor" aria-label="anchor" href="#arg-provider"></a></dt>
<dd><p><em>The basemap(s) to be used.</em></p>
<p><em>default:</em> <code>"OpenStreetMap"</code> | <em>scope:</em> dynamic &amp; static</p>
<p>The base map(s) to be used for the map. If not provided, will default to
<code>"OpenStreetMap"</code>/<code>"osm"</code> for both dynamic and static maps.</p><ul><li><p><em>Dynamic</em>: Any number of <a href="https://rstudio.github.io/leaflet/reference/providers.html" class="external-link">leaflet::providers</a>.
See <a href="http://leaflet-extras.github.io/leaflet-providers/preview/" class="external-link">http://leaflet-extras.github.io/leaflet-providers/preview/</a> for a list
of all base maps that can be used. If multiple base maps are provided, they
can be toggled between using a "layer control" interface. By default, the
interface will use the provider names as labels, but users can define their
own using a named vector (e.g., <code>c("Default" = "OpenStreetMap", "Satellite"   = "Esri.WorldImagery")</code>)</p></li>
<li><p><em>Static</em>: One of <code><a href="https://rdrr.io/pkg/rosm/man/deprecated.html" class="external-link">rosm::osm.types()</a></code>.</p></li>
</ul><p>There is some overlap in static and dynamic providers. For example,
<code>{ggspatial}</code> uses "osm" to specify "OpenStreetMap". When static providers
are provided to dynamic maps or vice versa, <code>{openairmaps}</code> will attempt to
substitute the correct provider string.</p></dd>


<dt id="arg-cols">cols<a class="anchor" aria-label="anchor" href="#arg-cols"></a></dt>
<dd><p><em>Colours to use for plotting.</em></p>
<p><em>default:</em> <code>"turbo"</code> | <em>scope:</em> dynamic &amp; static</p>
<p>The colours used for plotting, passed to <code><a href="https://openair-project.github.io/openair/reference/openColours.html" class="external-link">openair::openColours()</a></code>. The
default, <code>"turbo"</code>, is a rainbow palette with relatively perceptually
uniform colours.</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p><em>Transparency value for interpolated surface.</em></p>
<p><em>default:</em> <code>1</code> | <em>scope:</em> dynamic &amp; static</p>
<p>A value between 0 (fully transparent) and 1 (fully opaque).</p></dd>


<dt id="arg-show-markers">show.markers<a class="anchor" aria-label="anchor" href="#arg-show-markers"></a></dt>
<dd><p><em>Show original monitoring site markers?</em></p>
<p><em>default:</em> <code>TRUE</code> | <em>scope:</em> dynamic &amp; static</p>
<p>When <code>TRUE</code>, the coordinates in the input <code>data</code> will be shown as coloured
markers.</p></dd>


<dt id="arg-marker-border-voronoi-border">marker.border, voronoi.border<a class="anchor" aria-label="anchor" href="#arg-marker-border-voronoi-border"></a></dt>
<dd><p><em>Border colour to use for markers and
voronoi tiles.</em></p>
<p><em>default:</em> <code>"white"</code> | <em>scope:</em> dynamic &amp; static</p>
<p>Any valid HTML colour (e.g., a hex code). Use <code>NA</code> for no border.</p></dd>


<dt id="arg-legend">legend<a class="anchor" aria-label="anchor" href="#arg-legend"></a></dt>
<dd><p><em>Draw a legend?</em></p>
<p><em>default:</em> <code>TRUE</code> | <em>scope:</em> dynamic &amp; static</p>
<p>When <code>TRUE</code>, a legend will appear on the map identifying the colour scale.</p></dd>


<dt id="arg-legend-position">legend.position<a class="anchor" aria-label="anchor" href="#arg-legend-position"></a></dt>
<dd><p><em>Position of the shared legend.</em></p>
<p><em>default:</em> <code>NULL</code> | <em>scope:</em> dynamic &amp; static</p>
<p>When <code>legend = TRUE</code>, where should the legend be placed?</p><ul><li><p><em>Dynamic</em>: One of "topright", "topright", "bottomleft" or "bottomright". Passed to the <code>position</code> argument of <code><a href="https://rstudio.github.io/leaflet/reference/addLegend.html" class="external-link">leaflet::addLegend()</a></code>.</p></li>
<li><p><em>Static:</em>: One of "top", "right", "bottom" or "left". Passed to the <code>legend.position</code> argument of <code><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">ggplot2::theme()</a></code>.</p></li>
</ul></dd>


<dt id="arg-legend-title">legend.title<a class="anchor" aria-label="anchor" href="#arg-legend-title"></a></dt>
<dd><p><em>Title of the legend.</em></p>
<p><em>default:</em> <code>NULL</code> | <em>scope:</em> dynamic &amp; static</p>
<p>By default, when <code>legend.title = NULL</code>, the function will attempt to
provide a sensible legend title. <code>legend.title</code> allows users to overwrite
this - for example, to include units or other contextual information. For
<em>dynamic</em> maps, users may wish to use HTML tags to format the title.</p></dd>


<dt id="arg-legend-title-autotext">legend.title.autotext<a class="anchor" aria-label="anchor" href="#arg-legend-title-autotext"></a></dt>
<dd><p><em>Automatically format the title of the legend?</em></p>
<p><em>default:</em> <code>TRUE</code> | <em>scope:</em> dynamic &amp; static</p>
<p>When <code>legend.title.autotext = TRUE</code>, <code>legend.title</code> will be first run
through <code><a href="quickTextHTML.html">quickTextHTML()</a></code> (<em>dynamic</em>) or <code><a href="https://openair-project.github.io/openair/reference/quickText.html" class="external-link">openair::quickText()</a></code> (<em>static</em>).</p></dd>


<dt id="arg-static">static<a class="anchor" aria-label="anchor" href="#arg-static"></a></dt>
<dd><p><em>Produce a static map?</em></p>
<p><em>default:</em> <code>FALSE</code></p>
<p>This controls whether a <em>dynamic</em> or <em>static</em> map is produced. The former
is the default and is broadly more useful, but the latter may be preferable
for DOCX or PDF outputs (e.g., academic papers).</p></dd>


<dt id="arg-vgm">vgm<a class="anchor" aria-label="anchor" href="#arg-vgm"></a></dt>
<dd><p><em>A variogram model</em></p>
<p><em>default:</em> <code>gstat::vgm(psill = 1, model = "Exp", range = 50000, nugget = 1)</code> | <em>scope:</em> dynamic &amp; static</p>
<p>The variogram model to use when <code>method = "kriging"</code>. Must be the output of
<code><a href="https://r-spatial.github.io/gstat/reference/vgm.html" class="external-link">gstat::vgm()</a></code>.</p></dd>


<dt id="arg-args-idw-args-variogram-args-fit-variogram-args-krige">args.idw, args.variogram, args.fit.variogram, args.krige<a class="anchor" aria-label="anchor" href="#arg-args-idw-args-variogram-args-fit-variogram-args-krige"></a></dt>
<dd><p><em>Extra arguments
to pass to spatial interpolation functions for <code>krigingMap()</code>.</em></p>
<p><em>scope:</em> dynamic &amp; static</p>
<p>Extra arguments passed to <code><a href="https://r-spatial.github.io/gstat/reference/krige.html" class="external-link">gstat::idw()</a></code>, <code><a href="https://r-spatial.github.io/gstat/reference/vgm.html" class="external-link">gstat::vgm()</a></code>,
<code><a href="https://r-spatial.github.io/gstat/reference/fit.variogram.html" class="external-link">gstat::fit.variogram()</a></code>, and <code><a href="https://r-spatial.github.io/gstat/reference/krige.html" class="external-link">gstat::krige()</a></code>.</p></dd>


<dt id="arg-args-voronoi">args.voronoi<a class="anchor" aria-label="anchor" href="#arg-args-voronoi"></a></dt>
<dd><p><em>Extra arguments to pass to spatial interpolation
functions for <code>voronoiMap()</code>.</em></p>
<p><em>scope:</em> dynamic &amp; static</p>
<p>Extra arguments passed to <code><a href="https://rspatial.github.io/terra/reference/voronoi.html" class="external-link">terra::voronoi()</a></code>, with the exception of <code>x</code>
which is dealt with by <code>voronoiMap()</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Either:</p><ul><li><p><em>Dynamic:</em> A leaflet object</p></li>
<li><p><em>Static:</em> A <code>ggplot2</code> object using <code><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">ggplot2::coord_sf()</a></code> coordinates with a <code>ggspatial</code> basemap</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># import ozone DAQI</span></span></span>
<span class="r-in"><span><span class="va">daqi</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">openair</span><span class="fu">::</span><span class="fu"><a href="https://openair-project.github.io/openair/reference/importUKAQ.html" class="external-link">importUKAQ</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    pollutant <span class="op">=</span> <span class="st">"o3"</span>,</span></span>
<span class="r-in"><span>    year <span class="op">=</span> <span class="fl">2020</span>,</span></span>
<span class="r-in"><span>    source <span class="op">=</span> <span class="st">"aurn"</span>,</span></span>
<span class="r-in"><span>    data_type <span class="op">=</span> <span class="st">"daqi"</span>,</span></span>
<span class="r-in"><span>    meta <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get a UK shapefile</span></span></span>
<span class="r-in"><span><span class="va">uk</span> <span class="op">&lt;-</span> <span class="fu">rnaturalearth</span><span class="fu">::</span><span class="fu">ne_countries</span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">10</span>, country <span class="op">=</span> <span class="st">"united kingdom"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create spatially interpolated map</span></span></span>
<span class="r-in"><span><span class="fu">voronoiMap</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">daqi</span>,</span></span>
<span class="r-in"><span>  pollutant <span class="op">=</span> <span class="st">"poll_index"</span>,</span></span>
<span class="r-in"><span>  newdata <span class="op">=</span> <span class="va">uk</span>,</span></span>
<span class="r-in"><span>  statistic <span class="op">=</span> <span class="st">"max"</span>,</span></span>
<span class="r-in"><span>  breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">10.5</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  legend.title <span class="op">=</span> <span class="st">"Max O3 DAQI"</span>,</span></span>
<span class="r-in"><span>  cols <span class="op">=</span> <span class="st">"daqi"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">krigingMap</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">daqi</span>,</span></span>
<span class="r-in"><span>  pollutant <span class="op">=</span> <span class="st">"poll_index"</span>,</span></span>
<span class="r-in"><span>  newdata <span class="op">=</span> <span class="va">uk</span>,</span></span>
<span class="r-in"><span>  statistic <span class="op">=</span> <span class="st">"max"</span>,</span></span>
<span class="r-in"><span>  legend.title <span class="op">=</span> <span class="st">"Max O3 DAQI"</span>,</span></span>
<span class="r-in"><span>  cols <span class="op">=</span> <span class="fu">openair</span><span class="fu">::</span><span class="fu"><a href="https://openair-project.github.io/openair/reference/openColours.html" class="external-link">openColours</a></span><span class="op">(</span><span class="st">"daqi"</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jack Davison, David Carslaw.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

