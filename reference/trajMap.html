<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Trajectory line plots in leaflet — trajMap • openairmaps</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Nunito_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Trajectory line plots in leaflet — trajMap"><meta name="description" content='This function plots back trajectories on a leaflet map. This function
requires that data are imported using the openair::importTraj() function.
Options are provided to colour the individual trajectories (e.g., by
pollutant concentrations) or create "layer control" menus to show/hide
different layers.'><meta property="og:description" content='This function plots back trajectories on a leaflet map. This function
requires that data are imported using the openair::importTraj() function.
Options are provided to colour the individual trajectories (e.g., by
pollutant concentrations) or create "layer control" menus to show/hide
different layers.'><meta property="og:image" content="https://openair-project.github.io/openairmaps/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">openairmaps</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.1.9009</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/openairmaps.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openair-project" aria-label="Website"><span class="fa fa-globe"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://openair-project.github.io/book/" aria-label="Book"><span class="fa fa-book"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openair-project/openairmaps/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Packages</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-packages"><li><h6 class="dropdown-header" data-toc-skip>Data Analysis</h6></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/openair/">🧭 openair</a></li>
    <li><a class="dropdown-item" href="https://openair-project.github.io/openairmaps/">🗺️ openairmaps</a></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/deweather/">📉 deweather</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Data Access</h6></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/worldmet/">🍃 worldmet</a></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/euroaq/">🌍 euroaq</a></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Trajectory line plots in <code>leaflet</code></h1>
      <small class="dont-index">Source: <a href="https://github.com/openair-project/openairmaps/blob/main/R/traj_trajMap.R" class="external-link"><code>R/traj_trajMap.R</code></a></small>
      <div class="d-none name"><code>trajMap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function plots back trajectories on a <code>leaflet</code> map. This function
requires that data are imported using the <code><a href="https://rdrr.io/pkg/openair/man/importTraj.html" class="external-link">openair::importTraj()</a></code> function.
Options are provided to colour the individual trajectories (e.g., by
pollutant concentrations) or create "layer control" menus to show/hide
different layers.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">trajMap</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  longitude <span class="op">=</span> <span class="st">"lon"</span>,</span>
<span>  latitude <span class="op">=</span> <span class="st">"lat"</span>,</span>
<span>  colour <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  npoints <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"OpenStreetMap"</span>,</span>
<span>  legend.position <span class="op">=</span> <span class="st">"topright"</span>,</span>
<span>  legend.title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  legend.title.autotext <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  control.collapsed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  control.position <span class="op">=</span> <span class="st">"topright"</span>,</span>
<span>  control <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p><em>A data frame containing a HYSPLIT trajectory, perhaps accessed
with <code><a href="https://rdrr.io/pkg/openair/man/importTraj.html" class="external-link">openair::importTraj()</a></code>.</em></p>
<p><strong>required</strong></p>
<p>A data frame containing HYSPLIT model outputs. If this data were not
obtained using <code><a href="https://rdrr.io/pkg/openair/man/importTraj.html" class="external-link">openair::importTraj()</a></code>.</p></dd>


<dt id="arg-latitude-longitude">latitude, longitude<a class="anchor" aria-label="anchor" href="#arg-latitude-longitude"></a></dt>
<dd><p><em>The decimal latitude/longitude.</em></p>
<p><em>default:</em> <code>"lat"</code> / <code>"lon"</code></p>
<p>Column names representing the decimal latitude and longitude.</p></dd>


<dt id="arg-colour">colour<a class="anchor" aria-label="anchor" href="#arg-colour"></a></dt>
<dd><p><em>Column to be used for colouring each trajectory.</em></p>
<p><em>default:</em> <code>NULL</code></p>
<p>This column may be numeric, character, factor or date(time). This will
commonly be a pollutant concentration which has been joined (e.g., by
<code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::left_join()</a></code>) to the trajectory data by "date".</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p><em>A method to condition the <code>data</code> for separate plotting.</em></p>
<p><em>default:</em> <code>NULL</code></p>
<p>Used for splitting the trajectories into different groups which can be
selected between using a "layer control" menu. Passed to
<code><a href="https://rdrr.io/pkg/openair/man/cutData.html" class="external-link">openair::cutData()</a></code>.</p></dd>


<dt id="arg-cols">cols<a class="anchor" aria-label="anchor" href="#arg-cols"></a></dt>
<dd><p><em>Colours to use for plotting.</em></p>
<p><em>default:</em> <code>"default"</code></p>
<p>The colours used for plotting, passed to <code><a href="https://rdrr.io/pkg/openair/man/openColours.html" class="external-link">openair::openColours()</a></code>.</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p><em>Transparency value for trajectories.</em></p>
<p><em>default:</em> <code>1</code></p>
<p>A value between <code>0</code> (fully transparent) and <code>1</code> (fully opaque).</p></dd>


<dt id="arg-npoints">npoints<a class="anchor" aria-label="anchor" href="#arg-npoints"></a></dt>
<dd><p><em>Interval at which points are placed along the trajectory
paths.</em></p>
<p><em>default:</em> <code>12</code></p>
<p>A dot is placed every <code>npoints</code> along each full trajectory. For hourly back
trajectories points are plotted every <code>npoints</code> hours. This helps to
understand where the air masses were at particular times and get a feel for
the speed of the air (points closer together correspond to slower moving
air masses). Defaults to <code>12</code>.</p></dd>


<dt id="arg-provider">provider<a class="anchor" aria-label="anchor" href="#arg-provider"></a></dt>
<dd><p><em>The basemap to be used.</em></p>
<p><em>default:</em> <code>"OpenStreetMap"</code></p>
<p>A single <a href="https://rstudio.github.io/leaflet/reference/providers.html" class="external-link">leaflet::providers</a>. See
<a href="http://leaflet-extras.github.io/leaflet-providers/preview/" class="external-link">http://leaflet-extras.github.io/leaflet-providers/preview/</a> for a list of
all base maps that can be used.</p></dd>


<dt id="arg-legend-position">legend.position<a class="anchor" aria-label="anchor" href="#arg-legend-position"></a></dt>
<dd><p><em>Position of the shared legend.</em></p>
<p><em>default:</em> <code>"topright"</code></p>
<p>Where should the legend be placed? One of "topright", "topright",
"bottomleft" or "bottomright". Passed to the <code>position</code> argument of
<code><a href="https://rstudio.github.io/leaflet/reference/addLegend.html" class="external-link">leaflet::addLegend()</a></code>. <code>NULL</code> defaults to "topright".</p></dd>


<dt id="arg-legend-title">legend.title<a class="anchor" aria-label="anchor" href="#arg-legend-title"></a></dt>
<dd><p><em>Title of the legend.</em></p>
<p><em>default:</em> <code>NULL</code></p>
<p>By default, when <code>legend.title = NULL</code>, the function will attempt to
provide a sensible legend title based on <code>colour</code>. <code>legend.title</code> allows
users to overwrite this - for example, to include units or other contextual
information. Users may wish to use HTML tags to format the title.</p></dd>


<dt id="arg-legend-title-autotext">legend.title.autotext<a class="anchor" aria-label="anchor" href="#arg-legend-title-autotext"></a></dt>
<dd><p><em>Automatically format the title of the legend?</em></p>
<p><em>default:</em> <code>TRUE</code></p>
<p>When <code>legend.title.autotext = TRUE</code>, <code>legend.title</code> will be first run
through <code><a href="quickTextHTML.html">quickTextHTML()</a></code>.</p></dd>


<dt id="arg-control-collapsed">control.collapsed<a class="anchor" aria-label="anchor" href="#arg-control-collapsed"></a></dt>
<dd><p><em>Show the layer control as a collapsed?</em></p>
<p><em>default:</em> <code>FALSE</code></p>
<p>Should the "layer control" interface be collapsed? If <code>TRUE</code>, users will
have to hover over an icon to view the options.</p></dd>


<dt id="arg-control-position">control.position<a class="anchor" aria-label="anchor" href="#arg-control-position"></a></dt>
<dd><p><em>Position of the layer control menu</em></p>
<p><em>default:</em> <code>"topright"</code></p>
<p>Where should the "layer control" interface be placed? One of "topleft",
"topright", "bottomleft" or "bottomright". Passed to the <code>position</code>
argument of <code><a href="https://rstudio.github.io/leaflet/reference/addLayersControl.html" class="external-link">leaflet::addLayersControl()</a></code>.</p></dd>


<dt id="arg-control">control<a class="anchor" aria-label="anchor" href="#arg-control"></a></dt>
<dd><p>Deprecated. Please use <code>type</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to <code><a href="https://rdrr.io/pkg/openair/man/cutData.html" class="external-link">openair::cutData</a></code></p><dl><dt><code>names</code></dt>
<dd><p>By default, the columns created by <code><a href="https://rdrr.io/pkg/openair/man/cutData.html" class="external-link">cutData()</a></code> are named after
their <code>type</code> option. Specifying <code>names</code> defines other names for the columns,
which map onto the <code>type</code> options in the same order they are given. The
length of <code>names</code> should therefore be equal to the length of <code>type</code>.</p></dd>

    <dt><code>suffix</code></dt>
<dd><p>If <code>name</code> is not specified, <code>suffix</code> will be appended to any
added columns that would otherwise overwrite existing columns. For example,
<code>cutData(mydata, "nox", suffix = "_cuts")</code> would append a <code>nox_cuts</code> column
rather than overwriting <code>nox</code>.</p></dd>

    <dt><code>hemisphere</code></dt>
<dd><p>Can be <code>"northern"</code> or <code>"southern"</code>, used to split data
into seasons.</p></dd>

    <dt><code>n.levels</code></dt>
<dd><p>Number of quantiles to split numeric data into.</p></dd>

    <dt><code>start.day</code></dt>
<dd><p>What day of the week should the <code>type = "weekday"</code> start on?
The user can change the start day by supplying an integer between 0 and 6.
Sunday = 0, Monday = 1, ... For example to start the weekday plots on a
Saturday, choose <code>start.day = 6</code>.</p></dd>

    <dt><code>is.axis</code></dt>
<dd><p>A logical (<code>TRUE</code>/<code>FALSE</code>), used to request shortened cut
labels for axes.</p></dd>

    <dt><code>local.tz</code></dt>
<dd><p>Used for identifying whether a date has daylight savings time
(DST) applied or not. Examples include <code>local.tz = "Europe/London"</code>,
<code>local.tz = "America/New_York"</code>, i.e., time zones that assume DST.
<a href="https://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones" class="external-link">https://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones</a> shows time
zones that should be valid for most systems. It is important that the
original data are in GMT (UTC) or a fixed offset from GMT.</p></dd>

    <dt><code>latitude,longitude</code></dt>
<dd><p>The decimal latitude and longitudes used when <code>type = "daylight"</code>. Note that locations west of Greenwich have negative
longitudes.</p></dd>


</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A leaflet object.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/openair/man/trajPlot.html" class="external-link">openair::trajPlot()</a></code></p>
<p><code><a href="trajMapStatic.html">trajMapStatic()</a></code> for the static <code>ggplot2</code> equivalent of <code>trajMap()</code></p>
<p>Other interactive trajectory maps:
<code><a href="trajLevelMap.html">trajLevelMap</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">trajMap</span><span class="op">(</span><span class="va">traj_data</span>, colour <span class="op">=</span> <span class="st">"pm10"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jack Davison, David Carslaw.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

